<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Adelaide Hills Wine Region</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
  <link rel="stylesheet" type="text/css" href="./Qgis2threejs.css">
</head>

<body>
  <div id="app">
    <div style="position:absolute; z-index: -1; display: flex; align-items: center; justify-content: center; width: 100vw; height: 100vh; background: linear-gradient(to bottom, #fcf2d5 0%,#e3edfa 40%,#f0f9ff 100%)">
      <img src="loading.gif"/>
    </div>

    <div id="logo">
      <img src="ahw.svg" class="ahw-logo"/>
      
    </div>

    <div :style="blipStyle" :class="['marker', {'blip' : activateBlip ? true : false }]" ></div>
    <div class="model-container">
      <model-obj src="./gear.stl"></model-obj>
    </div>

    <div id="webgl" @mousedown="clickHandler(event)"></div>
    <!-- popup -->

    <div id="popup" style="display:none; visibility: hidden !important">
      <div id="closebtn">&times;</div>
      <div id="popupbar"></div>
      <div id="popupbody">
       <div id="popupcontent"></div>
     </div>
   </div>
 </div>


 <script src="./vue.js"></script>
 <script src="./threejs/three.min.js"></script>
 <script src="./vue-3d-model.min.js"></script>
 <script src="./Qgis2threejs.js"></script>
 <script src="./threejs/OrbitControls.js"></script>
 <script src="./index.js"></script>

 <script>
  import { ModelObj } from 'vue-3d-model'
 var superpoint = superpoint
  var app = new Vue({
    el: '#app',
    props: [superpoint],
    components: { window.ModelObj },
    data: {
      activateBlip: false,
      blipStyle: {},
      superpoint: superpoint
    },
    mounted(){

      var option = Q3D.Options;
      var container = document.getElementById("webgl");
      var app = Q3D.application;
      app.init(container);

    // load the project
    app.loadProject(project);

    // document.getElementById("infobtn").onclick = app.showInfo.bind(app);
    // if ("hidebutton" in app.urlParams) document.getElementById("infobtn").style.display = "none";

    app.addEventListeners();
    app.start();

  },
  computed:{
    
  },
  methods:{
    clickHandler(event){
      // console.log(event)
      if((window.superpoint.x > 15448612 && window.superpoint.x < 15456288) && (window.superpoint.y < -4150720 && window.superpoint.y > -4154972) ){
          this.blipStyle = {'top' : event.clientY+'px', 'left' : event.clientX+'px'}
          this.activateBlip = true
          var self = this;

          this.timer = setTimeout(function() {
            self.activateBlip = false
            clearTimeout(this.timer)
          }.bind(this), 1000);

          

      } else{
          this.activateBlip = false
      }
      
    }
  }

})
</script>


</body>
</html>
